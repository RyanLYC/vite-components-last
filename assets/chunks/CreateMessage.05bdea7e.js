import{h as u,g as c,d as _,j as O,o as d,b as y,w as Z,ae as D,k as C,n as T,N as R,c as z,I as S,l as h,e as x,r as E,X as V,H as b,af as $,T as j,ag as H,ah as w}from"./framework.a7ae395d.js";import"./index.0f72eec1.js";import{i as L,a as q}from"./interface.ad25f21a.js";const k=u(0),A=(t=1e3)=>{const o=u(t),e=c(()=>k.value+o.value);return{currentZIndex:e,nextZIndex:()=>(k.value++,e.value),initialZIndex:o}},P=_({props:{vNode:{type:[String,Object],required:!0}},setup(t){return()=>t.vNode}}),X={key:0,class:"zg-message__icon"},F={class:"zg-message__content"},G=_({name:"ZgMessage",__name:"Message",props:{message:{},duration:{default:3e3},showClose:{type:Boolean},showIcon:{type:Boolean},type:{default:"info"},onDestory:{},id:{},zIndex:{},offset:{default:20}},setup(t,{expose:o}){const e=t,s=u(!1),m=u(),f=u(0),p=c(()=>K(e.id)),r=c(()=>e.offset+p.value),g=c(()=>f.value+r.value),v=c(()=>({top:r.value+"px",zIndex:e.zIndex}));let n;const i=()=>{e.duration!==0&&(n=setTimeout(()=>{s.value=!1},e.duration))},B=()=>{clearTimeout(n)};O(async()=>{s.value=!0,i()});const M=()=>{e.onDestory()},N=()=>{f.value=m.value.getBoundingClientRect().height};return o({bottomOffset:g,visible:s}),(a,I)=>(d(),y(j,{name:"message-transition",onAfterLeave:M,onEnter:N},{default:Z(()=>[D(C("div",{class:T(["zg-message",{[`zg-message--${a.type==="error"?"danger":a.type}`]:a.type}]),role:"alert",ref_key:"messageRef",ref:m,style:R(v.value),onMouseenter:B,onMouseleave:i},[a.showIcon?(d(),z("div",X,[(d(),y(S(h(L)[e.type])))])):x("",!0),C("div",F,[E(a.$slots,"default",{},()=>[a.message?(d(),y(h(P),{key:0,vNode:a.message},null,8,["vNode"])):x("",!0)])]),a.showClose?(d(),z("div",{key:1,class:"zg-message__close",onClick:I[0]||(I[0]=V(Q=>s.value=!1,["stop"]))},[b(h(q))])):x("",!0)],38),[[$,s.value]])]),_:3}))}});let J=1;const l=H([]),ee=t=>{const{nextZIndex:o}=A(),e=`message_${J++}`,s=document.createElement("div"),m=()=>{const n=l.findIndex(i=>i.id===e);n!==-1&&(l.splice(n,1),s&&w(null,s))},f=()=>{const n=l.find(i=>i.id===e);n&&(n.vm.exposed.visible.value=!1)},p={...t,id:e,zIndex:o(),onDestory:m},r=b(G,p);w(r,s),document.body.appendChild(s.firstElementChild);const g=r.component,v={id:e,vnode:r,vm:g,props:p,destory:f};return l.push(v),v},K=t=>{const o=l.findIndex(e=>e.id===t);return o<=0?0:l[o-1].vm.exposed.bottomOffset.value};export{ee as c};
