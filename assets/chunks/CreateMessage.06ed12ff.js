import{h as u,g as d,d as b,j as D,o as c,b as y,w as N,a2 as O,k as C,n as R,N as T,c as z,I as $,l as h,e as x,r as E,Z as S,H as Z,a3 as V,T as H,a4 as L,a5 as w}from"./framework.51914527.js";import{i as j,R as A,C as P}from"./interface.92ecbbd5.js";const k=u(0),q=(a=1e3)=>{const t=u(a),e=d(()=>k.value+t.value);return{currentZIndex:e,nextZIndex:()=>(k.value++,e.value),initialZIndex:t}},F=q,G={key:0,class:"zg-message__icon"},J={class:"zg-message__content"},K=b({name:"ZgMessage",__name:"Message",props:{message:{},duration:{default:3e3},showClose:{type:Boolean},showIcon:{type:Boolean},type:{default:"info"},onDestory:{},id:{},zIndex:{},offset:{default:20}},setup(a,{expose:t}){const e=a,s=u(!1),m=u(),f=u(0),p=d(()=>U(e.id)),r=d(()=>e.offset+p.value),g=d(()=>f.value+r.value),v=d(()=>({top:r.value+"px",zIndex:e.zIndex}));let n;const i=()=>{e.duration!==0&&(n=setTimeout(()=>{s.value=!1},e.duration))},_=()=>{clearTimeout(n)};D(async()=>{s.value=!0,i()});const B=()=>{e.onDestory()},M=()=>{f.value=m.value.getBoundingClientRect().height};return t({bottomOffset:g,visible:s}),(o,I)=>(c(),y(H,{name:"message-transition",onAfterLeave:B,onEnter:M},{default:N(()=>[O(C("div",{class:R(["zg-message",{[`zg-message--${o.type==="error"?"danger":o.type}`]:o.type}]),role:"alert",ref_key:"messageRef",ref:m,style:T(v.value),onMouseenter:_,onMouseleave:i},[o.showIcon?(c(),z("div",G,[(c(),y($(h(j)[e.type])))])):x("",!0),C("div",J,[E(o.$slots,"default",{},()=>[o.message?(c(),y(h(A),{key:0,vNode:o.message},null,8,["vNode"])):x("",!0)])]),o.showClose?(c(),z("div",{key:1,class:"zg-message__close",onClick:I[0]||(I[0]=S(W=>s.value=!1,["stop"]))},[Z(h(P))])):x("",!0)],38),[[V,s.value]])]),_:3}))}});let Q=1;const l=L([]),ee=a=>{const{nextZIndex:t}=F(),e=`message_${Q++}`,s=document.createElement("div"),m=()=>{const n=l.findIndex(i=>i.id===e);n!==-1&&(l.splice(n,1),s&&w(null,s))},f=()=>{const n=l.find(i=>i.id===e);n&&(n.vm.exposed.visible.value=!1)},p={...a,id:e,zIndex:t(),onDestory:m},r=Z(K,p);w(r,s),document.body.appendChild(s.firstElementChild);const g=r.component,v={id:e,vnode:r,vm:g,props:p,destory:f};return l.push(v),v},U=a=>{const t=l.findIndex(e=>e.id===a);return t<=0?0:l[t-1].vm.exposed.bottomOffset.value};export{ee as c};
